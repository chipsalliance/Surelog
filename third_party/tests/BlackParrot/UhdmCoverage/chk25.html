
<!DOCTYPE html>
<html>
<head>
<style>
body {

}
p {
font-size: 14px;
}</style>
<h3>./bp_me/src/v/cce/bp_cce_dir.v Cov: 98% </h3>
<pre style="margin:0; padding:0 ">   1: /**</pre>
<pre style="margin:0; padding:0 ">   2:  *</pre>
<pre style="margin:0; padding:0 ">   3:  * Name:</pre>
<pre style="margin:0; padding:0 ">   4:  *   bp_cce_dir.v</pre>
<pre style="margin:0; padding:0 ">   5:  *</pre>
<pre style="margin:0; padding:0 ">   6:  * Description:</pre>
<pre style="margin:0; padding:0 ">   7:  *   The directory stores the coherence state and tags for all cache blocks tracked by</pre>
<pre style="margin:0; padding:0 ">   8:  *   a CCE. The directory supports a small set of operations such as reading a way-group or entry,</pre>
<pre style="margin:0; padding:0 ">   9:  *   and writing an entry's coherence state and tag.</pre>
<pre style="margin:0; padding:0 ">  10:  *</pre>
<pre style="margin:0; padding:0 ">  11:  *   The directory is a synchronous read 1RW memory.</pre>
<pre style="margin:0; padding:0 ">  12:  *</pre>
<pre style="margin:0; padding:0 ">  13:  *   All writes take 1 cycle. RDW operations take multiple cycles. RDW reads out the way-group and</pre>
<pre style="margin:0; padding:0 ">  14:  *   performs tag comparisons and coherence state extraction, which are output in the sharers</pre>
<pre style="margin:0; padding:0 ">  15:  *   vectors. The RDW operation also produces information about the LRU way provided by the</pre>
<pre style="margin:0; padding:0 ">  16:  *   requesting LCE.</pre>
<pre style="margin:0; padding:0 ">  17:  *</pre>
<pre style="margin:0; padding:0 ">  18:  *   RDE is currently not supported.</pre>
<pre style="margin:0; padding:0 ">  19:  *</pre>
<pre style="margin:0; padding:0 ">  20:  */</pre>
<pre style="margin:0; padding:0 ">  21: </pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  22: module bp_cce_dir</pre>
<pre style="margin:0; padding:0 ">  23:   import bp_common_pkg::*;</pre>
<pre style="margin:0; padding:0 ">  24:   import bp_cce_pkg::*;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  25:   #(parameter num_way_groups_p            = "inv"</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  26:     , parameter num_lce_p                 = "inv"</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  27:     , parameter num_cce_p                 = "inv"</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  28:     , parameter lce_assoc_p               = "inv"</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  29:     , parameter tag_width_p               = "inv"</pre>
<pre style="margin:0; padding:0 ">  30: </pre>
<pre style="margin:0; padding:0 ">  31:     // Default parameters</pre>
<pre style="margin:0; padding:0 ">  32: </pre>
<pre style="margin:0; padding:0 ">  33:     // 1 LCE : 1 tag set per row</pre>
<pre style="margin:0; padding:0 ">  34:     // 2, 4, 8, 16 LCE : 2 tag sets per row</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  35:     , parameter dir_tag_sets_per_row_lp  = (num_lce_p / num_cce_p)</pre>
<pre style="margin:0; padding:0 ">  36: </pre>
<pre style="margin:0; padding:0 ">  37:     // Derived parameters</pre>
<pre style="margin:0; padding:0 ">  38:     , localparam lg_num_way_groups_lp     = `BSG_SAFE_CLOG2(num_way_groups_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  39:     , localparam lg_num_lce_lp            = `BSG_SAFE_CLOG2(num_lce_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  40:     , localparam lg_lce_assoc_lp          = `BSG_SAFE_CLOG2(lce_assoc_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  41: </pre>
<pre style="margin:0; padding:0 ">  42:     // Directory information widths</pre>
<pre style="margin:0; padding:0 ">  43:     , localparam entry_width_lp           = (tag_width_p+`bp_coh_bits)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  44:     , localparam tag_set_width_lp         = (entry_width_lp*lce_assoc_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  45: </pre>
<pre style="margin:0; padding:0 ">  46:     , localparam lg_dir_tag_sets_per_row_lp = `BSG_SAFE_CLOG2(dir_tag_sets_per_row_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  47:     // Width of each directory RAM row</pre>
<pre style="margin:0; padding:0 ">  48:     , localparam dir_row_width_lp         = (tag_set_width_lp*dir_tag_sets_per_row_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  49:     // number of entry (tag+state) per directory row</pre>
<pre style="margin:0; padding:0 ">  50:     , localparam dir_entry_per_row_lp     = (dir_tag_sets_per_row_lp*lce_assoc_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  51: </pre>
<pre style="margin:0; padding:0 ">  52:     // Number of rows in directory required to hold a complete tag set</pre>
<pre style="margin:0; padding:0 ">  53:     // 1, 2 LCE: 1</pre>
<pre style="margin:0; padding:0 ">  54:     // 4 LCE: 2</pre>
<pre style="margin:0; padding:0 ">  55:     // 8 LCE: 4</pre>
<pre style="margin:0; padding:0 ">  56:     // 16 LCE: 8</pre>
<pre style="margin:0; padding:0 ">  57:     , localparam dir_rows_per_wg_lp       = (num_lce_p / dir_tag_sets_per_row_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  58:     , localparam lg_dir_rows_per_wg_lp    = `BSG_SAFE_CLOG2(dir_rows_per_wg_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  59:     // Total number of rows in the directory RAM</pre>
<pre style="margin:0; padding:0 ">  60:     , localparam dir_rows_lp              = (dir_rows_per_wg_lp*num_way_groups_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  61:     , localparam lg_dir_rows_lp           = `BSG_SAFE_CLOG2(dir_rows_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  62: </pre>
<pre style="margin:0; padding:0 ">  63:     , localparam sh_assign_shift_lp = (dir_tag_sets_per_row_lp == 1) ? 0 : lg_dir_tag_sets_per_row_lp</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  64: </pre>
<pre style="margin:0; padding:0 ">  65:   )</pre>
<pre style="margin:0; padding:0 ">  66:   (input                                                          clk_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  67:    , input                                                        reset_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  68: </pre>
<pre style="margin:0; padding:0 ">  69:    , input [lg_num_way_groups_lp-1:0]                             way_group_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  70:    , input [lg_num_lce_lp-1:0]                                    lce_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  71:    , input [lg_lce_assoc_lp-1:0]                                  way_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  72:    , input [lg_lce_assoc_lp-1:0]                                  lru_way_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  73:    , input [`bp_cce_inst_minor_op_width-1:0]                      r_cmd_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  74:    , input                                                        r_v_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  75: </pre>
<pre style="margin:0; padding:0 ">  76:    , input [tag_width_p-1:0]                                      tag_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  77:    , input [`bp_coh_bits-1:0]                                     coh_state_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  78:    , input [`bp_cce_inst_minor_op_width-1:0]                      w_cmd_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  79:    , input                                                        w_v_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  80:    , input                                                        w_clr_wg_i</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  81: </pre>
<pre style="margin:0; padding:0 ">  82:    , output logic                                                 busy_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  83: </pre>
<pre style="margin:0; padding:0 ">  84:    , output logic                                                 sharers_v_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  85:    , output logic [num_lce_p-1:0]                                 sharers_hits_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  86:    , output logic [num_lce_p-1:0][lg_lce_assoc_lp-1:0]            sharers_ways_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  87:    , output logic [num_lce_p-1:0][`bp_coh_bits-1:0]               sharers_coh_states_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  88: </pre>
<pre style="margin:0; padding:0 ">  89:    , output logic                                                 lru_v_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  90:    , output logic                                                 lru_cached_excl_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  91:    , output logic [tag_width_p-1:0]                               lru_tag_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  92: </pre>
<pre style="margin:0; padding:0 ">  93:    , output logic [tag_width_p-1:0]                               tag_o</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  94: </pre>
<pre style="margin:0; padding:0 ">  95:   );</pre>
<pre style="margin:0; padding:0 ">  96: </pre>
<pre style="margin:0; padding:0 ">  97:   typedef struct packed {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  98:     logic [tag_width_p-1:0]      tag;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 ">  99:     logic [`bp_coh_bits-1:0]     state;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 100:   } dir_entry_s;</pre>
<pre id="id101" style="background-color: #FFB6C1; margin:0; padding:0 "> 101: </pre>
<pre style="margin:0; padding:0 "> 102:   // Directory</pre>
<pre style="margin:0; padding:0 "> 103:   // read / write valid signals</pre>
<pre style="margin:0; padding:0 "> 104:   logic dir_ram_w_v;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 105:   logic dir_ram_v;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 106:   // read / write address</pre>
<pre style="margin:0; padding:0 "> 107:   logic [lg_dir_rows_lp-1:0] dir_ram_addr;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 108:   // write mask and data in</pre>
<pre style="margin:0; padding:0 "> 109:   logic [dir_row_width_lp-1:0] dir_ram_w_mask;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 110:   logic [dir_row_width_lp-1:0] dir_ram_w_data;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 111:   // data out</pre>
<pre style="margin:0; padding:0 "> 112:   dir_entry_s [dir_entry_per_row_lp-1:0] dir_row_lo;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 113:   dir_entry_s [dir_tag_sets_per_row_lp-1:0][lce_assoc_p-1:0] dir_row_entries;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 114:   assign dir_row_entries = dir_row_lo;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 115: </pre>
<pre style="margin:0; padding:0 "> 116:   typedef enum logic [2:0] {</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 117:     RESET</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 118:     ,READY</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 119:     ,READ_WAY_GROUP</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 120:     ,READ_ENTRY</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 121:   } dir_state_e;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 122: </pre>
<pre style="margin:0; padding:0 "> 123:   dir_state_e dir_state, dir_state_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 124: </pre>
<pre style="margin:0; padding:0 "> 125:   logic [lg_dir_rows_per_wg_lp-1:0] dir_rd_cnt_r, dir_rd_cnt_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 126:   logic [lg_num_way_groups_lp-1:0]  way_group_r, way_group_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 127:   logic [lg_num_lce_lp-1:0]         lce_r, lce_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 128:   logic [lg_lce_assoc_lp-1:0]       way_r, way_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 129:   logic [lg_lce_assoc_lp-1:0]       lru_way_r, lru_way_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 130:   logic [tag_width_p-1:0]           tag_r, tag_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 131:   logic dir_data_o_v_r, dir_data_o_v_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 132: </pre>
<pre style="margin:0; padding:0 "> 133:   logic [lg_dir_tag_sets_per_row_lp-1:0] wr_tag_set_select, rd_tag_set_select;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 134:   assign wr_tag_set_select = (num_lce_p == 1) ? '0 : lce_i[0+:lg_dir_tag_sets_per_row_lp];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 135:   assign rd_tag_set_select = (num_lce_p == 1) ? '0 : lce_i[0+:lg_dir_tag_sets_per_row_lp];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 136: </pre>
<pre style="margin:0; padding:0 "> 137:   logic [lg_dir_rows_per_wg_lp-1:0] wr_wg_row_select, rd_wg_row_select;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 138:   assign wr_wg_row_select = (num_lce_p == 1) ? '0 : lce_i[(lg_num_lce_lp-1)-:lg_dir_rows_per_wg_lp];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 139:   assign rd_wg_row_select = (num_lce_p == 1) ? '0 : lce_i[(lg_num_lce_lp-1)-:lg_dir_rows_per_wg_lp];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 140: </pre>
<pre style="margin:0; padding:0 "> 141:   logic                                                 sharers_v_r, sharers_v_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 142:   logic [num_lce_p-1:0]                                 sharers_hits_r, sharers_hits_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 143:   logic [num_lce_p-1:0][lg_lce_assoc_lp-1:0]            sharers_ways_r, sharers_ways_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 144:   logic [num_lce_p-1:0][`bp_coh_bits-1:0]               sharers_coh_states_r, sharers_coh_states_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 145: </pre>
<pre style="margin:0; padding:0 "> 146:   assign sharers_v_o = sharers_v_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 147:   assign sharers_hits_o = sharers_hits_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 148:   assign sharers_ways_o = sharers_ways_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 149:   assign sharers_coh_states_o = sharers_coh_states_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 150: </pre>
<pre style="margin:0; padding:0 "> 151:   logic [dir_tag_sets_per_row_lp-1:0]                                 sharers_hits;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 152:   logic [dir_tag_sets_per_row_lp-1:0][lg_lce_assoc_lp-1:0]            sharers_ways;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 153:   logic [dir_tag_sets_per_row_lp-1:0][`bp_coh_bits-1:0]               sharers_coh_states;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 154: </pre>
<pre style="margin:0; padding:0 "> 155:   always_ff @(posedge clk_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 156:     if (reset_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 157:       dir_state <= RESET;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 158:       dir_rd_cnt_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 159:       way_group_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 160:       lce_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 161:       way_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 162:       lru_way_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 163:       tag_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 164:       dir_data_o_v_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 165: </pre>
<pre style="margin:0; padding:0 "> 166:       sharers_v_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 167:       sharers_hits_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 168:       sharers_ways_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 169:       sharers_coh_states_r <= '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 170: </pre>
<pre style="margin:0; padding:0 "> 171:     end else begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 172:       dir_state <= dir_state_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 173:       dir_rd_cnt_r <= dir_rd_cnt_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 174:       way_group_r <= way_group_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 175:       lce_r <= lce_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 176:       way_r <= way_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 177:       lru_way_r <= lru_way_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 178:       tag_r <= tag_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 179:       dir_data_o_v_r <= dir_data_o_v_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 180: </pre>
<pre style="margin:0; padding:0 "> 181:       sharers_v_r <= sharers_v_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 182:       sharers_hits_r <= sharers_hits_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 183:       sharers_ways_r <= sharers_ways_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 184:       sharers_coh_states_r <= sharers_coh_states_n;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 185: </pre>
<pre style="margin:0; padding:0 "> 186:     end</pre>
<pre style="margin:0; padding:0 "> 187:   end</pre>
<pre style="margin:0; padding:0 "> 188: </pre>
<pre style="margin:0; padding:0 "> 189:   // Directory State Machine logic</pre>
<pre style="margin:0; padding:0 "> 190:   always_comb begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 191:     if (reset_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 192:       dir_state_n = RESET;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 193:       dir_rd_cnt_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 194:       dir_ram_w_mask = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 195:       dir_ram_w_data = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 196:       dir_ram_v = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 197:       dir_ram_w_v = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 198:       dir_ram_addr = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 199:       way_group_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 200:       lce_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 201:       way_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 202:       lru_way_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 203:       tag_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 204:       dir_data_o_v_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 205: </pre>
<pre style="margin:0; padding:0 "> 206:       sharers_v_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 207:       sharers_hits_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 208:       sharers_ways_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 209:       sharers_coh_states_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 210: </pre>
<pre style="margin:0; padding:0 "> 211:       busy_o = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 212: </pre>
<pre style="margin:0; padding:0 "> 213:       tag_o = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 214: </pre>
<pre style="margin:0; padding:0 "> 215:     end else begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 216:       // hold state by default</pre>
<pre style="margin:0; padding:0 "> 217:       dir_state_n = dir_state;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 218:       dir_rd_cnt_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 219:       dir_ram_w_mask = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 220:       dir_ram_w_data = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 221:       dir_ram_v = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 222:       dir_ram_w_v = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 223:       dir_ram_addr = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 224:       way_group_n = way_group_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 225:       lce_n = lce_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 226:       way_n = way_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 227:       lru_way_n = lru_way_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 228:       tag_n = tag_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 229:       dir_data_o_v_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 230: </pre>
<pre style="margin:0; padding:0 "> 231:       sharers_v_n = sharers_v_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 232:       sharers_hits_n = sharers_hits_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 233:       sharers_ways_n = sharers_ways_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 234:       sharers_coh_states_n = sharers_coh_states_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 235: </pre>
<pre style="margin:0; padding:0 "> 236:       busy_o = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 237: </pre>
<pre style="margin:0; padding:0 "> 238:       // by default, tag output is the tag register</pre>
<pre style="margin:0; padding:0 "> 239:       tag_o = tag_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 240: </pre>
<pre style="margin:0; padding:0 "> 241:       case (dir_state)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 242:         RESET: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 243:           dir_state_n = (reset_i) ? RESET : READY;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 244:         end</pre>
<pre style="margin:0; padding:0 "> 245:         READY: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 246:           dir_state_n = READY;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 247: </pre>
<pre style="margin:0; padding:0 "> 248:           // initiate directory read of first row of way group</pre>
<pre style="margin:0; padding:0 "> 249:           // first row will be valid on output of directory next cycle (in READ)</pre>
<pre style="margin:0; padding:0 "> 250:           if (r_v_i & (r_cmd_i == e_rdw_op)) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 251:             dir_state_n = READ_WAY_GROUP;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 252: </pre>
<pre style="margin:0; padding:0 "> 253:             // capture inputs into registers</pre>
<pre style="margin:0; padding:0 "> 254:             way_group_n = way_group_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 255:             lce_n = lce_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 256:             way_n = way_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 257:             lru_way_n = lru_way_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 258:             tag_n = tag_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 259: </pre>
<pre style="margin:0; padding:0 "> 260:             // setup the read</pre>
<pre style="margin:0; padding:0 "> 261:             dir_ram_v = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 262: </pre>
<pre style="margin:0; padding:0 "> 263:             // The address to read depends on how many rows per way group there are.</pre>
<pre style="margin:0; padding:0 "> 264:             // If there is only one row per wg, then the input way group is the address.</pre>
<pre style="margin:0; padding:0 "> 265:             // If there is more than one row per wg, then the input way group is the high bits</pre>
<pre style="margin:0; padding:0 "> 266:             // and the read count register is the low bits.</pre>
<pre style="margin:0; padding:0 "> 267:             // This results in entries 0..N-1 being for WG 0, N..(2*N)-1 for WG 1, etc.</pre>
<pre style="margin:0; padding:0 "> 268:             dir_ram_addr = (dir_rows_per_wg_lp == 1) ? way_group_i : {way_group_i, dir_rd_cnt_r};</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 269: </pre>
<pre style="margin:0; padding:0 "> 270:             // reset read counter to 0; this counter (zero-based) indicates which RAM row from the</pre>
<pre style="margin:0; padding:0 "> 271:             // target way-group is being output by the directory.</pre>
<pre style="margin:0; padding:0 "> 272:             // Next cycle (when the first row is valid), the counter will have value 0, and will</pre>
<pre style="margin:0; padding:0 "> 273:             // increment by 1 each cycle until all the reads are complete.</pre>
<pre style="margin:0; padding:0 "> 274:             dir_rd_cnt_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 275: </pre>
<pre style="margin:0; padding:0 "> 276:             // next cycle, the data coming out of the RAM will be valid</pre>
<pre style="margin:0; padding:0 "> 277:             dir_data_o_v_n = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 278: </pre>
<pre style="margin:0; padding:0 "> 279:             // reset the sharers vectors for the new read; new values will be prepared for writing</pre>
<pre style="margin:0; padding:0 "> 280:             // starting in the next cycle, when the first read data is valid</pre>
<pre style="margin:0; padding:0 "> 281:             sharers_v_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 282:             sharers_hits_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 283:             sharers_ways_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 284:             sharers_coh_states_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 285: </pre>
<pre style="margin:0; padding:0 "> 286:           // read entry</pre>
<pre style="margin:0; padding:0 "> 287:           end else if (r_v_i & (r_cmd_i == e_rde_op)) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 288:             dir_state_n = READ_ENTRY;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 289: </pre>
<pre style="margin:0; padding:0 "> 290:             // capture inputs into registers</pre>
<pre style="margin:0; padding:0 "> 291:             way_group_n = way_group_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 292:             lce_n = lce_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 293:             way_n = way_i;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 294: </pre>
<pre style="margin:0; padding:0 "> 295:             // entry read does not use LRU or input tag</pre>
<pre style="margin:0; padding:0 "> 296:             lru_way_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 297:             tag_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 298: </pre>
<pre style="margin:0; padding:0 "> 299:             // setup the read</pre>
<pre style="margin:0; padding:0 "> 300:             dir_ram_v = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 301: </pre>
<pre style="margin:0; padding:0 "> 302:             // The address to read depends on how many rows per way group there are.</pre>
<pre style="margin:0; padding:0 "> 303:             // If there is only one row per wg, then the input way group is the address.</pre>
<pre style="margin:0; padding:0 "> 304:             // If there is more than one row per wg, then the input way group is the high bits</pre>
<pre style="margin:0; padding:0 "> 305:             // and the rd_wg_row_select is the low bits since RDE op takes only one read (read a</pre>
<pre style="margin:0; padding:0 "> 306:             // single entry from a single tag set)</pre>
<pre style="margin:0; padding:0 "> 307:             dir_ram_addr = (dir_rows_per_wg_lp == 1) ? way_group_i : {way_group_i, rd_wg_row_select};</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 308: </pre>
<pre style="margin:0; padding:0 "> 309:             // reset the sharers vectors for the new read; new values will be prepared for writing</pre>
<pre style="margin:0; padding:0 "> 310:             // starting in the next cycle, when the first read data is valid</pre>
<pre style="margin:0; padding:0 "> 311:             sharers_v_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 312:             sharers_hits_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 313:             sharers_ways_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 314:             sharers_coh_states_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 315: </pre>
<pre style="margin:0; padding:0 "> 316:           // directory write</pre>
<pre style="margin:0; padding:0 "> 317:           end else if (w_v_i & ((w_cmd_i == e_wde_op) | (w_cmd_i == e_wds_op))) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 318:             // mark sharers info as invalid after a write, since it is possible the write</pre>
<pre style="margin:0; padding:0 "> 319:             // changes data in the way-group that generated the sharers vectors</pre>
<pre style="margin:0; padding:0 "> 320:             sharers_v_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 321: </pre>
<pre style="margin:0; padding:0 "> 322:             tag_n = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 323: </pre>
<pre style="margin:0; padding:0 "> 324:             dir_state_n = READY;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 325:             dir_ram_v = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 326:             dir_ram_w_v = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 327: </pre>
<pre style="margin:0; padding:0 "> 328:             dir_ram_addr = (dir_rows_per_wg_lp == 1) ? way_group_i : {way_group_i, wr_wg_row_select};</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 329: </pre>
<pre style="margin:0; padding:0 "> 330:             if (w_clr_wg_i) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 331:               dir_ram_w_data = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 332:               dir_ram_w_mask = '1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 333:             end else if (w_cmd_i == e_wde_op) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 334:               dir_ram_w_mask = {{(dir_row_width_lp-entry_width_lp){1'b0}},{entry_width_lp{1'b1}}}</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 335:                               << (wr_tag_set_select*tag_set_width_lp + way_i*entry_width_lp);</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 336:               dir_ram_w_data = {{(dir_row_width_lp-entry_width_lp){1'b0}},{tag_i, coh_state_i}}</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 337:                                << (wr_tag_set_select*tag_set_width_lp + way_i*entry_width_lp);</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 338:             end else if (w_cmd_i == e_wds_op) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 339:               dir_ram_w_mask = {{(dir_row_width_lp-`bp_coh_bits){1'b0}},{`bp_coh_bits{1'b1}}}</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 340:                               << (wr_tag_set_select*tag_set_width_lp + way_i*entry_width_lp);</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 341:               dir_ram_w_data = {{(dir_row_width_lp-entry_width_lp){1'b0}},{tag_i, coh_state_i}}</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 342:                                << (wr_tag_set_select*tag_set_width_lp + way_i*entry_width_lp);</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 343:             end else begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 344:               dir_ram_w_mask = '0;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 345:             end</pre>
<pre style="margin:0; padding:0 "> 346: </pre>
<pre style="margin:0; padding:0 "> 347:           end</pre>
<pre style="margin:0; padding:0 "> 348:         end</pre>
<pre style="margin:0; padding:0 "> 349:         READ_WAY_GROUP: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 350: </pre>
<pre style="margin:0; padding:0 "> 351:           // directory is busy</pre>
<pre style="margin:0; padding:0 "> 352:           busy_o = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 353: </pre>
<pre style="margin:0; padding:0 "> 354:           for(int i = 0; i < dir_tag_sets_per_row_lp; i++) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 355:             sharers_hits_n[(dir_rd_cnt_r << sh_assign_shift_lp) + i] = sharers_hits[i];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 356:             sharers_ways_n[(dir_rd_cnt_r << sh_assign_shift_lp) + i] = sharers_ways[i];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 357:             sharers_coh_states_n[(dir_rd_cnt_r << sh_assign_shift_lp) + i] = sharers_coh_states[i];</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 358:           end</pre>
<pre style="margin:0; padding:0 "> 359: </pre>
<pre style="margin:0; padding:0 "> 360:           dir_rd_cnt_n = dir_rd_cnt_r + 'd1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 361: </pre>
<pre style="margin:0; padding:0 "> 362:           // do another read if required</pre>
<pre style="margin:0; padding:0 "> 363:           // This only happens if there is more than 1 LCE, so dir_ram_addr doesn't need to check</pre>
<pre style="margin:0; padding:0 "> 364:           // whether there is only 1 LCE, as it does in the READY state</pre>
<pre style="margin:0; padding:0 "> 365:           if (dir_rd_cnt_r < (dir_rows_per_wg_lp-1)) begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 366:             dir_ram_v = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 367:             dir_ram_addr = {way_group_r, dir_rd_cnt_n};</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 368:             dir_data_o_v_n = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 369:             dir_state_n = READ_WAY_GROUP;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 370:           end else begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 371:             dir_state_n = READY;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 372:             // sharers will be valid next cycle</pre>
<pre style="margin:0; padding:0 "> 373:             sharers_v_n = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 374:           end</pre>
<pre style="margin:0; padding:0 "> 375:         end</pre>
<pre style="margin:0; padding:0 "> 376:         READ_ENTRY: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 377:           busy_o = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 378:           sharers_hits_n[0] = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 379:           sharers_ways_n[0] = way_r;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 380:           sharers_coh_states_n[0] = dir_row_entries[lce_r[0+:lg_dir_tag_sets_per_row_lp]][way_r].state;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 381:           sharers_v_n = 1'b1;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 382:           // output the tag in the entry, and store it to the register</pre>
<pre style="margin:0; padding:0 "> 383:           // override output of tag_r with the tag from the directory read</pre>
<pre style="margin:0; padding:0 "> 384:           tag_o = dir_row_entries[lce_r[0+:lg_dir_tag_sets_per_row_lp]][way_r].tag;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 385:           tag_n = dir_row_entries[lce_r[0+:lg_dir_tag_sets_per_row_lp]][way_r].tag;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 386:           dir_state_n = READY;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 387:         end</pre>
<pre style="margin:0; padding:0 "> 388:         default: begin</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 389:           dir_state_n = RESET;</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 390:         end</pre>
<pre style="margin:0; padding:0 "> 391:       endcase</pre>
<pre style="margin:0; padding:0 "> 392:     end</pre>
<pre style="margin:0; padding:0 "> 393:   end</pre>
<pre style="margin:0; padding:0 "> 394: </pre>
<pre style="margin:0; padding:0 "> 395:   // Reads are synchronous, with the address latched in the current cycle, and data available next</pre>
<pre style="margin:0; padding:0 "> 396:   // Writes take 1 cycle</pre>
<pre style="margin:0; padding:0 "> 397:   bsg_mem_1rw_sync_mask_write_bit</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 398:     #(.width_p(dir_row_width_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 399:       ,.els_p(dir_rows_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 400:       )</pre>
<pre style="margin:0; padding:0 "> 401:     directory</pre>
<pre id="id402" style="background-color: #FFB6C1; margin:0; padding:0 "> 402:      (.clk_i(clk_i)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 403:       ,.reset_i(reset_i)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 404:       ,.w_i(dir_ram_w_v)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 405:       ,.w_mask_i(dir_ram_w_mask)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 406:       ,.addr_i(dir_ram_addr)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 407:       ,.data_i(dir_ram_w_data)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 408:       ,.v_i(dir_ram_v)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 409:       ,.data_o(dir_row_lo)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 410:       );</pre>
<pre style="margin:0; padding:0 "> 411: </pre>
<pre style="margin:0; padding:0 "> 412:   // combinational logic to determine hit, way, and state for current directory row output</pre>
<pre style="margin:0; padding:0 "> 413:   bp_cce_dir_tag_checker</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 414:     #(.tag_sets_per_row_p(dir_tag_sets_per_row_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 415:       ,.rows_per_wg_p(dir_rows_per_wg_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 416:       ,.row_width_p(dir_row_width_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 417:       ,.lce_assoc_p(lce_assoc_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 418:       ,.tag_width_p(tag_width_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 419:      )</pre>
<pre style="margin:0; padding:0 "> 420:     tag_checker</pre>
<pre id="id421" style="background-color: #FFB6C1; margin:0; padding:0 "> 421:      (.row_i(dir_row_lo)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 422:       ,.row_v_i(dir_data_o_v_r)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 423:       ,.tag_i(tag_r)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 424:       ,.sharers_hits_o(sharers_hits)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 425:       ,.sharers_ways_o(sharers_ways)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 426:       ,.sharers_coh_states_o(sharers_coh_states)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 427:      );</pre>
<pre style="margin:0; padding:0 "> 428: </pre>
<pre style="margin:0; padding:0 "> 429:   bp_cce_dir_lru_extract</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 430:     #(.tag_sets_per_row_p(dir_tag_sets_per_row_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 431:       ,.rows_per_wg_p(dir_rows_per_wg_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 432:       ,.row_width_p(dir_row_width_lp)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 433:       ,.lce_assoc_p(lce_assoc_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 434:       ,.num_lce_p(num_lce_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 435:       ,.tag_width_p(tag_width_p)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 436:      )</pre>
<pre style="margin:0; padding:0 "> 437:     lru_extract</pre>
<pre id="id438" style="background-color: #FFB6C1; margin:0; padding:0 "> 438:      (.row_i(dir_row_lo)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 439:       ,.row_v_i(dir_data_o_v_r)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 440:       ,.wg_row_i(dir_rd_cnt_r)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 441:       ,.lce_i(lce_r)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 442:       ,.lru_way_i(lru_way_r)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 443:       ,.lru_v_o(lru_v_o)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 444:       ,.lru_cached_excl_o(lru_cached_excl_o)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 445:       ,.lru_tag_o(lru_tag_o)</pre>
<pre style="background-color: #C0C0C0; margin:0; padding:0 "> 446:      );</pre>
<pre style="margin:0; padding:0 "> 447: </pre>
<pre style="margin:0; padding:0 "> 448: endmodule</pre>
<pre style="margin:0; padding:0 "> 449: </pre>
</body>
</html>
